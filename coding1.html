<html><head><base href="https://codecraft-dev.vercel.app/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CodeCraft</title>
<style>
  :root {
    --primary-color: #0080ff;
    --secondary-color: #1c2333;
    --background-color: #0e1525;
    --text-color: #ffffff;
    --border-color: #30363d;
  }
   body, html {
    margin: 0;
    padding: 0;
    font-family: 'Roboto', Arial, sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
    height: 100%;
    overflow: hidden;
  }
  .container {
    display: flex;
    height: 100vh;
  }
  .sidebar {
    width: 250px;
    background-color: var(--secondary-color);
    border-right: 1px solid var(--border-color);
    padding: 20px;
    display: flex;
    flex-direction: column;
  }
  .main {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }
  .editor {
    flex-grow: 1;
    border-bottom: 1px solid var(--border-color);
  }
  .console {
    height: 200px;
    background-color: var(--secondary-color);
    overflow-y: auto;
    padding: 10px;
  }
  .header {
    background-color: var(--secondary-color);
    padding: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
  }
  .logo {
    font-size: 24px;
    font-weight: bold;
    color: var(--primary-color);
  }
  button, .file-input {
    text-align: center;
    background-color: var(--primary-color);
    color: white;
    border: none;
    padding: 8px 16px;
    cursor: pointer;
    border-radius: 4px;
    margin-bottom: 10px;
  }
  button:hover, .file-input:hover {
    opacity: 0.9;
  }
  .file-list {
    list-style-type: none;
    padding: 0;
    flex-grow: 1;
    overflow-y: auto;
  }
  .file-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 5px 0;
  }
  .file-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
  .file-name {
    cursor: pointer;
    flex-grow: 1;
  }
  .file-actions {
    display: flex;
    gap: 5px;
  }
  .file-action {
    background: none;
    border: none;
    color: var(--text-color);
    cursor: pointer;
    padding: 2px;
  }
  .file-action:hover {
    color: var(--primary-color);
  }
  #fileInput {
    display: none;
  }
  .watermark {
    position: fixed;
    bottom: 10px;
    right: 10px;
    font-size: 12px;
    color: rgba(255, 255, 255, 0.3);
    pointer-events: none;
  }
  .button-group {
    display: flex;
    gap: 10px;
  }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
</head>
<body>
  <div class="container">
    <div class="sidebar">
      <h3>Files</h3>
      <button onclick="addNewFile()">New File</button>
      <label for="fileInput" class="file-input">Upload File</label>
      <input type="file" id="fileInput" onchange="handleFileUpload(event)" multiple>
      <ul id="fileList" class="file-list"></ul>
    </div>
    <div class="main">
      <div class="header">
        <div class="logo">CodeCraft</div>
        <button onclick="runCode()">Run</button>
         <button onclick="downloadProject()">Download</button>
      </div>
      <div id="editor" class="editor"></div>
      <div id="console" class="console"></div>
    </div>
  </div>
  <div class="watermark">Made with CodeCraft</div>

  <script>
    let editor;
    let currentFile = 'index.html';
    let files = {
      'index.html': '<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>My Web Page</title>\n  <link rel="stylesheet" href="styles.css">\n</head>\n<body>\n  <h1>Welcome to CodeCraft!</h1>\n  <p>Start coding your web project here.</p>\n  <script src="script.js"><\/script>\n</body>\n</html>',
      'styles.css': 'body {\n  font-family: Arial, sans-serif;\n  line-height: 1.6;\n  color: #333;\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\nh1 {\n  color: #0080ff;\n}',
      'script.js': '// Made with CodeCraft\nconsole.log("Hello from CodeCraft!");\n\n// Your JavaScript code goes here'
    };

    function initEditor() {
      editor = ace.edit("editor");
      editor.setTheme("ace/theme/monokai");
      editor.session.setMode("ace/mode/html");
      editor.setValue(files[currentFile]);
      editor.clearSelection();
      updateFileList();
    }

    function loadFile(filename) {
      currentFile = filename;
      editor.setValue(files[filename]);
      editor.clearSelection();
      
      const mode = filename.endsWith('.html') ? 'html' :
                   filename.endsWith('.css') ? 'css' :
                   filename.endsWith('.js') ? 'javascript' : 'text';
      editor.session.setMode(`ace/mode/${mode}`);
    }

    function addNewFile() {
      const filename = prompt("Enter the name of the new file:");
      if (filename && !files[filename]) {
        files[filename] = '';
        loadFile(filename);
        updateFileList();
        addWatermark(filename);
      } else if (files[filename]) {
        alert("A file with this name already exists.");
      }
    }

    function renameFile(oldName) {
      const newName = prompt("Enter the new name for the file:", oldName);
      if (newName && newName !== oldName && !files[newName]) {
        files[newName] = files[oldName];
        delete files[oldName];
        if (currentFile === oldName) {
          currentFile = newName;
        }
        updateFileList();
        loadFile(newName);
      } else if (files[newName]) {
        alert("A file with this name already exists.");
      }
    }

    function deleteFile(filename) {
      if (confirm(`Are you sure you want to delete ${filename}?`)) {
        delete files[filename];
        if (currentFile === filename) {
          currentFile = Object.keys(files)[0];
          loadFile(currentFile);
        }
        updateFileList();
      }
    }

    function updateFileList() {
      const fileList = document.getElementById('fileList');
      fileList.innerHTML = '';
      Object.keys(files).forEach(filename => {
        const li = document.createElement('li');
        li.className = 'file-item';
        li.innerHTML = `
          <span class="file-name" onclick="loadFile('${filename}')">${filename}</span>
          <div class="file-actions">
            <button class="file-action" onclick="renameFile('${filename}')">‚úèÔ∏è</button>
            <button class="file-action" onclick="deleteFile('${filename}')">üóëÔ∏è</button>
          </div>
        `;
        fileList.appendChild(li);
      });
    }

    function handleFileUpload(event) {
      const uploadedFiles = event.target.files;
      for (let i = 0; i < uploadedFiles.length; i++) {
        const file = uploadedFiles[i];
        const reader = new FileReader();
        reader.onload = function(e) {
          const filename = file.name;
          if (!files[filename]) {
            files[filename] = e.target.result;
            updateFileList();
            loadFile(filename);
            addWatermark(filename);
          } else {
            alert(`A file named ${filename} already exists. Please rename the file and try again.`);
          }
        };
        reader.readAsText(file);
      }
    }

    function addWatermark(filename) {
      if (filename.endsWith('.js')) {
        files[filename] = `// Made with CodeCraft\n${files[filename]}`;
      } else if (filename.endsWith('.html')) {
        files[filename] = files[filename].replace('</body>', '  <div style="position:fixed;bottom:10px;right:10px;font-size:12px;color:rgba(0,0,0,0.3);">Made with CodeCraft</div>\n</body>');
      } else if (filename.endsWith('.css')) {
        files[filename] += '\n\n/* Made with CodeCraft */\n';
      }
    }

    function runCode() {
      files[currentFile] = editor.getValue();

      const outputWindow = window.open('', 'CodeCraft Output', 'width=800,height=600');
      outputWindow.document.open();
      outputWindow.document.write(files['index.html']);
      
      Object.keys(files).forEach(filename => {
        if (filename.endsWith('.css')) {
          const style = outputWindow.document.createElement('style');
          style.textContent = files[filename];
          outputWindow.document.head.appendChild(style);
        } else if (filename.endsWith('.js')) {
          const script = outputWindow.document.createElement('script');
          script.textContent = files[filename];
          outputWindow.document.body.appendChild(script);
        }
      });
      
      outputWindow.document.close();

      const consoleOutput = document.getElementById('console');
      consoleOutput.innerHTML = '';
      outputWindow.console.log = function(...args) {
        consoleOutput.innerHTML += args.join(' ') + '<br>';
      };
    }

    async function downloadProject() {
  try {
    const zip = new JSZip();

    Object.keys(files).forEach(filename => {
      zip.file(filename, files[filename]);
    });

    const content = await zip.generateAsync({ type: "blob" });

    const url = URL.createObjectURL(content);

    const a = document.createElement('a');
    a.href = url;
    a.download = 'Codecraft.zip';
    
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);

    URL.revokeObjectURL(url);

    console.log("Project downloaded successfully!");
  } catch (error) {
    console.error("Error during the download process:", error);
  }
}

    window.onload = initEditor;
  </script>
</body>
</html>
